//分为4步

//1.新建一个类
//2.写类的方法
//3.写一个类的run方法 统一执行类方法
//4.实例化对象 执行run方法


//注意赋值this 你点击谁 谁就是this




//新建一个类
function Auth() {
    var self = this;
    self.maskWrapper = $('.mask-wrapper');
    self.scrollWrapper = $('.scroll-wrapper');
}

//控制显示和隐藏的方法
Auth.prototype.ListenshowHideEvent = function () {
    var self = this;
    var signinBtn = $('.signin-btn');
    var signupBtn = $('.signup-btn');
    var closeBtn = $('.close-btn');

    signinBtn.click(function () {
        self.showEvent();
    })

     signupBtn.click(function () {
        self.showEvent();
    })

    closeBtn.click(function () {
        self.hideEvent();
    })
}

//实现登录注册的切换方法
Auth.prototype.ListenSwitchEvent = function () {
    var self = this;
    var switcher= $('.switch');

    switcher.click(function () {
       //获取当前距离左边的位置
        var currentLeft = self.scrollWrapper.css('left')
        currentLeft = parseInt(currentLeft);
        if(currentLeft<0){
            self.scrollWrapper.animate({'left':'0'})
        }else{
            self.scrollWrapper.animate({'left':'-400px'})
        }
    })
}

//定义类的方法
Auth.prototype.showEvent = function () {
    var self = this;
    self.maskWrapper.show();
}


Auth.prototype.hideEvent = function () {
    var self = this;
    self.maskWrapper.hide();
}

//写注册的方法
Auth.prototype.listenSignupEvent = function () {
    var signupGroup = $('.signup-group')
    var submitBtn = signupGroup.find('.submit-btn')
    submitBtn.click(function () {
        var telephoneInput = signupGroup.find('input[name="telephone"]');
        var usernameInput = signupGroup.find('input[name="username"]');
        var password1Input = signupGroup.find('input[name="password1"]');
        var password2Input = signupGroup.find('input[name="password2"]');


        var telephone = telephoneInput.val();
        var username = usernameInput.val();
        var password1 = password1Input.val();
        var password2 = password2Input.val();

        qfajax.post({
            'url':'/account/register/',
            'data':{
                'telephone':telephone,
                'username':username,
                'password1':password1,
                'password2':password2,
            },
            //result存放服务器返回的结果
            'success':function (result) {
                alert(result)
            }
        })

    })
}



//run方法 用来执行类的方法
Auth.prototype.run = function () {
    var self = this;
    self.ListenshowHideEvent();
    self.ListenSwitchEvent();
    self.listenSignupEvent();

}

//实例化对象  执行run方法

// $(function () {
//    等页面加载完毕以后我再执行里边的内容
// })

$(function () {
    var auth = new Auth();
    auth.run();
})